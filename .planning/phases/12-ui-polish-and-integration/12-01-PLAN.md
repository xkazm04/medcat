---
phase: 12-ui-polish-and-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/chat/typing-indicator.tsx
  - src/components/chat/starter-prompts.tsx
  - src/components/chat/chat-panel.tsx
  - src/components/chat/message-list.tsx
  - src/lib/chat/constants.ts
autonomous: true

must_haves:
  truths:
    - "User sees 'Generating response...' text before first token arrives"
    - "Typing indicator disappears once streaming starts"
    - "Empty chat shows 3 clickable starter prompt chips"
    - "Clicking a starter prompt sends that text as a message"
    - "Starter prompts disappear after first message is sent"
  artifacts:
    - path: "src/components/chat/typing-indicator.tsx"
      provides: "Animated typing indicator component"
      min_lines: 15
    - path: "src/components/chat/starter-prompts.tsx"
      provides: "Clickable prompt chips component"
      min_lines: 25
    - path: "src/lib/chat/constants.ts"
      contains: "STARTER_PROMPTS"
  key_links:
    - from: "src/components/chat/chat-panel.tsx"
      to: "TypingIndicator"
      via: "status === 'submitted' conditional"
      pattern: "status.*===.*'submitted'"
    - from: "src/components/chat/message-list.tsx"
      to: "StarterPrompts"
      via: "messages.length === 0 conditional"
      pattern: "messages\\.length.*===.*0"
---

<objective>
Add typing indicator and starter prompts for better chat UX

Purpose: Users need visual feedback while waiting for AI response, and new users need guidance on what the chatbot can do. Typing indicator shows "Generating response..." before first token; starter prompts showcase capabilities.

Output: TypingIndicator and StarterPrompts components integrated into ChatPanel and MessageList.
</objective>

<execution_context>
@C:\Users\mkdol\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\mkdol\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-ui-polish-and-integration/12-CONTEXT.md
@.planning/phases/12-ui-polish-and-integration/12-RESEARCH.md
@src/components/chat/chat-panel.tsx
@src/components/chat/message-list.tsx
@src/lib/chat/constants.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TypingIndicator and integrate in ChatPanel</name>
  <files>
    src/components/chat/typing-indicator.tsx
    src/components/chat/chat-panel.tsx
  </files>
  <action>
1. Create `src/components/chat/typing-indicator.tsx`:
   - 'use client' directive
   - Simple component showing "Generating response" with animated dots
   - Use Tailwind `animate-pulse` for text and `animate-bounce` with staggered delays for dots
   - Style: `text-sm text-muted-foreground px-4 py-2`

2. Update `src/components/chat/chat-panel.tsx`:
   - Import TypingIndicator from './typing-indicator'
   - Add `const showTypingIndicator = status === 'submitted';` (line ~19, after isStreaming)
   - Render `{showTypingIndicator && <TypingIndicator />}` between MessageList and ErrorBubble (before line 100)
   - Position: Fixed above the error bubble area, always visible when active

Per CONTEXT.md: Shows before first token only, disappears once streaming starts. The AI SDK status values: 'submitted' = waiting for response, 'streaming' = tokens flowing.
  </action>
  <verify>
    npm run build
    Manual: Open chat, send message, see "Generating response..." appear, then disappear when text starts streaming
  </verify>
  <done>
    Typing indicator shows during 'submitted' status and hides when streaming begins
  </done>
</task>

<task type="auto">
  <name>Task 2: Create StarterPrompts and integrate in MessageList</name>
  <files>
    src/components/chat/starter-prompts.tsx
    src/components/chat/message-list.tsx
    src/lib/chat/constants.ts
  </files>
  <action>
1. Update `src/lib/chat/constants.ts`:
   - Add STARTER_PROMPTS array with 3 feature-showcasing prompts:
     ```typescript
     export const STARTER_PROMPTS = [
       'Search for titanium hip implants',
       'Compare prices for knee prostheses',
       'Find EU market alternatives',
     ];
     ```

2. Create `src/components/chat/starter-prompts.tsx`:
   - 'use client' directive
   - Props: `onSelect: (prompt: string) => void`
   - Import STARTER_PROMPTS from '@/lib/chat/constants'
   - Layout: Centered content with intro text and horizontal row of pill-shaped chips
   - Intro text: "Try asking about medical devices" (text-sm text-muted-foreground)
   - Chip style: `px-3 py-1.5 text-sm bg-muted hover:bg-muted/80 rounded-full border border-border transition-colors`
   - Each chip onClick calls onSelect(prompt)

3. Update `src/components/chat/message-list.tsx`:
   - Import StarterPrompts from './starter-prompts'
   - Add onSendMessage prop to MessageListProps: `onSendMessage: (text: string) => void`
   - Replace the empty state div (lines 211-213) with StarterPrompts:
     ```tsx
     {messages.length === 0 ? (
       <StarterPrompts onSelect={onSendMessage} />
     ) : (
       // existing message rendering
     )}
     ```

4. Update `src/components/chat/chat-panel.tsx`:
   - Pass onSendMessage prop to MessageList:
     ```tsx
     <MessageList
       messages={messages}
       isStreaming={isStreaming}
       onComparePrice={handleComparePrice}
       onCategorySelect={handleCategorySelect}
       onViewInCatalog={handleViewInCatalog}
       onSendMessage={handleSubmit}
     />
     ```

Per CONTEXT.md: 3 prompts, feature showcase, disappear after first message (derived from messages.length check).
  </action>
  <verify>
    npm run build
    Manual: Open fresh chat, see 3 starter prompt chips, click one, message sends, prompts disappear
  </verify>
  <done>
    Starter prompts appear on empty chat and disappear after first message is sent
  </done>
</task>

</tasks>

<verification>
All checks:
- [ ] TypeScript compiles: `npm run build` succeeds
- [ ] TypingIndicator shows when status === 'submitted'
- [ ] TypingIndicator hides when streaming starts
- [ ] StarterPrompts show when messages.length === 0
- [ ] Clicking starter prompt sends message
- [ ] StarterPrompts disappear after message sent
- [ ] STARTER_PROMPTS array exists in constants.ts
</verification>

<success_criteria>
1. User sees "Generating response..." with animated dots before first token arrives
2. Typing indicator disappears once AI response starts streaming
3. Empty chat shows 3 clickable prompt chips showcasing features
4. Clicking a chip immediately sends that prompt as a message
5. Prompts disappear once a message exists in the conversation
</success_criteria>

<output>
After completion, create `.planning/phases/12-ui-polish-and-integration/12-01-SUMMARY.md`
</output>
