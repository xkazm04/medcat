---
phase: 02-product-management
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/ui/sheet.tsx
  - src/components/product/emdn-breadcrumb.tsx
  - src/components/product/regulatory-info.tsx
autonomous: true

must_haves:
  truths:
    - "Sheet component slides in from right side"
    - "EMDN breadcrumb displays category hierarchy"
    - "Regulatory info shows UDI, CE, and MDR class"
  artifacts:
    - path: "src/components/ui/sheet.tsx"
      provides: "Accessible slide-in panel"
      exports: ["Sheet", "SheetTrigger", "SheetContent", "SheetHeader", "SheetTitle", "SheetClose"]
    - path: "src/components/product/emdn-breadcrumb.tsx"
      provides: "EMDN hierarchy display"
      exports: ["EMDNBreadcrumb"]
    - path: "src/components/product/regulatory-info.tsx"
      provides: "Regulatory fields display"
      exports: ["RegulatoryInfo"]
  key_links:
    - from: "src/components/ui/sheet.tsx"
      to: "@radix-ui/react-dialog"
      via: "Dialog primitive"
      pattern: "import.*@radix-ui/react-dialog"
---

<objective>
Create reusable UI components: Sheet (slide-in panel), EMDN breadcrumb hierarchy, and regulatory information display.

Purpose: Building blocks for product detail view - accessible sheet component and specialized display components
Output: Three new components ready for integration in product sheet
</objective>

<execution_context>
@C:\Users\kazda\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\kazda\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-product-management/02-RESEARCH.md
@src/lib/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Sheet component</name>
  <files>src/components/ui/sheet.tsx</files>
  <action>
Create src/components/ui/sheet.tsx - a slide-in panel built on Radix Dialog:

1. Mark 'use client' at top

2. Import dependencies:
   - @radix-ui/react-dialog (DialogPrimitive)
   - motion/react (motion, AnimatePresence)
   - lucide-react (X icon)
   - React types (forwardRef, ComponentPropsWithoutRef)

3. Create component structure following Radix composition pattern:
   - Sheet = DialogPrimitive.Root
   - SheetTrigger = DialogPrimitive.Trigger
   - SheetClose = DialogPrimitive.Close
   - SheetPortal = DialogPrimitive.Portal

4. SheetOverlay - animated backdrop:
   - Fixed inset-0, z-50, bg-black/40
   - Motion: fade in/out (opacity 0 -> 1)
   - Use forwardRef pattern

5. SheetContent - the sliding panel:
   - Props: side ('left' | 'right', default 'right'), children, className
   - Fixed positioning: right-0 top-0 (or left-0 for left side)
   - Width: min(500px, 90vw)
   - Background: bg-background, border-l, shadow-lg
   - Motion: slide in from side (x: 100% -> 0 for right)
   - Spring animation: damping 25, stiffness 300
   - Include close button (X icon) positioned top-right
   - Wrap content in AnimatePresence for exit animation

6. SheetHeader - header section:
   - px-6 py-4, border-b border-border
   - Simple div with children

7. SheetTitle = DialogPrimitive.Title
8. SheetDescription = DialogPrimitive.Description

9. Export all components

Important: Use theme tokens from Tailwind v4 (@theme variables):
- bg-background, text-foreground, border-border
- hover:bg-muted for interactive states
  </action>
  <verify>
    - npx tsc --noEmit (no type errors)
    - grep "SheetContent" src/components/ui/sheet.tsx (component exists)
    - grep "@radix-ui/react-dialog" src/components/ui/sheet.tsx (import present)
  </verify>
  <done>Sheet component exports Sheet, SheetTrigger, SheetContent, SheetHeader, SheetTitle, SheetClose with Motion animations</done>
</task>

<task type="auto">
  <name>Task 2: Create EMDN breadcrumb and Regulatory info components</name>
  <files>src/components/product/emdn-breadcrumb.tsx, src/components/product/regulatory-info.tsx</files>
  <action>
1. Create src/components/product directory if it doesn't exist

2. Create src/components/product/emdn-breadcrumb.tsx:
   - Mark 'use client'
   - Import ChevronRight from lucide-react

   Props interface:
   - path: string | null (e.g., "P/P09/P0901/P090101")
   - categoryName: string

   Implementation:
   - If no path, show "Not classified" in muted text
   - Parse path into segments: path.split('/').filter(Boolean)
   - Define level descriptions map:
     - 0: 'Category'
     - 1: 'Group'
     - 2: 'Type Level 1'
     - 3: 'Type Level 2'
     - etc.
   - Render horizontal breadcrumb with ChevronRight separators
   - Last segment highlighted (font-medium text-accent)
   - Below breadcrumb, show level description + category name

3. Create src/components/product/regulatory-info.tsx:
   - Mark 'use client'
   - Import icons from lucide-react: Shield, CheckCircle, XCircle, AlertTriangle

   Props interface (RegulatoryInfoProps):
   - udiDi: string | null
   - ceMarked: boolean
   - mdrClass: 'I' | 'IIa' | 'IIb' | 'III' | null

   MDR class descriptions constant:
   - 'I': 'Low risk - Basic devices'
   - 'IIa': 'Low to medium risk - Short-term invasive'
   - 'IIb': 'Medium to high risk - Long-term invasive'
   - 'III': 'High risk - Critical devices'

   Layout (space-y-4):
   - Section header: "Regulatory Information" (uppercase, tracking-wide, muted)

   - UDI-DI row:
     - Shield icon (text-accent)
     - Label "UDI-DI"
     - Value or "Not registered"

   - CE Marking row:
     - CheckCircle (green) if ceMarked, XCircle (red) if not
     - Label "CE Marking"
     - "CE marked for EU market" or "Not CE marked"

   - MDR Class row:
     - AlertTriangle icon (amber)
     - Label "MDR Risk Class"
     - Class + description or "Not classified"

Export both components.
  </action>
  <verify>
    - npx tsc --noEmit (no type errors)
    - ls src/components/product/emdn-breadcrumb.tsx (exists)
    - ls src/components/product/regulatory-info.tsx (exists)
  </verify>
  <done>EMDNBreadcrumb displays hierarchy path, RegulatoryInfo displays UDI/CE/MDR with appropriate icons</done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit`
2. Sheet imports Radix Dialog: `grep "@radix-ui/react-dialog" src/components/ui/sheet.tsx`
3. Sheet has Motion animations: `grep "motion" src/components/ui/sheet.tsx`
4. EMDN breadcrumb parses path: `grep "split" src/components/product/emdn-breadcrumb.tsx`
5. Regulatory info has all three sections: `grep -E "UDI|CE|MDR" src/components/product/regulatory-info.tsx`
</verification>

<success_criteria>
- Sheet component renders slide-in panel with smooth animations
- Sheet is accessible (Radix Dialog handles focus trap, keyboard nav)
- EMDN breadcrumb shows category hierarchy from path field
- Regulatory info displays all three fields with icons and descriptions
- All components use Tailwind v4 theme tokens
</success_criteria>

<output>
After completion, create `.planning/phases/02-product-management/02-02-SUMMARY.md`
</output>
